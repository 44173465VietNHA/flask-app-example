{% extends 'layout.j2' %}

{% block body %}
    <h2>Posts</h2>

    {% for post in posts %}
        <h3>
            <a href="{{ url_for('post_show', post_id=post.id) }}">
                {{ post.text|truncate(30) }} by {{ post.person.username }}
            </a>
            {% if post.person_id == current_user.id %}
                [ <a href="{{ url_for('post_edit', post_id=post.id) }}">edit post</a> ]
            {% endif %}
        </h3>
        <p>{{ post.text|truncate(150) }}</p>
    {% endfor %}
{% endblock %}
